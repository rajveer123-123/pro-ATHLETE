<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Track & Field Coach-Pro</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        :root { --p: #1e40af; --s: #7c3aed; --bg: #f1f5f9; --text: #1e293b; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); margin: 0; padding-bottom: 60px; }
        .nav-bar { display: flex; overflow-x: auto; background: white; border-bottom: 2px solid #e2e8f0; position: sticky; top: 0; z-index: 1000; padding: 5px; scrollbar-width: none; }
        .nav-btn { padding: 12px 20px; border: none; background: none; font-weight: bold; color: #64748b; cursor: pointer; white-space: nowrap; }
        .nav-btn.active { color: var(--p); border-bottom: 3px solid var(--p); }
        .container { padding: 15px; display: none; max-width: 600px; margin: auto; }
        .container.active { display: block; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .card { background: white; padding: 20px; border-radius: 16px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); margin-bottom: 15px; }
        label { font-weight: 600; font-size: 14px; color: #475569; }
        select, input, textarea { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #cbd5e1; border-radius: 10px; font-size: 16px; }
        .btn { width: 100%; padding: 14px; border: none; border-radius: 10px; color: white; font-weight: bold; cursor: pointer; font-size: 16px; transition: 0.2s; }
        .btn:active { transform: scale(0.98); }
        .review-card { border-left: 5px solid var(--s); background: #fdf2ff; padding: 10px; border-radius: 8px; margin-top: 10px; }
        .date-tag { font-size: 11px; color: gray; float: right; }
    </style>
</head>
<body>

    <div class="nav-bar">
        <button class="nav-btn active" onclick="showTab('p-tab', this)">üèÉ Practice</button>
        <button class="nav-btn" onclick="showTab('m-tab', this)">üèÜ Main Event</button>
        <button class="nav-btn" onclick="showTab('d-tab', this)">ü§ñ Coach AI</button>
        <button class="nav-btn" onclick="showTab('r-tab', this)">üíé AI Report</button>
        <button class="nav-btn" onclick="showTab('v-tab', this)">üí¨ Coach Review</button>
    </div>

    <div id="p-tab" class="container active">
        <h2>Practice Entry</h2>
        <div class="card">
            <label>Athlete Name:</label>
            <input type="text" id="pAthlete" placeholder="Enter Athlete Name">
            
            <label>Select Drill:</label>
            <select id="pDrill">
                <optgroup label="Running">
                    <option>30m</option><option>40m</option><option>80m</option><option>120m</option>
                    <option>150m</option><option>180m</option><option>300m</option><option>800m</option>
                </optgroup>
                <optgroup label="Jumps">
                    <option>Broad Jump</option><option>Standing Triple</option><option>5 Bounded</option><option>10 Bounded</option>
                </optgroup>
                <optgroup label="Throws">
                    <option>Ball Throw</option><option>Back Throw</option>
                </optgroup>
            </select>
            
            <label>Result (Time/Dist):</label>
            <input type="number" step="0.01" id="pVal" placeholder="0.00">
            <button class="btn" style="background:var(--p)" onclick="saveData('practice')">SAVE PRACTICE</button>
        </div>
    </div>

    <div id="m-tab" class="container">
        <h2>Main Event Results</h2>
        <div class="card">
            <input type="text" id="mAthlete" placeholder="Athlete Name">
            <select id="mEvent">
                <optgroup label="Sprints">
                    <option>60m</option><option>100m</option><option>200m</option><option>400m</option>
                </optgroup>
                <optgroup label="Middle/Long">
                    <option>800m</option><option>1500m</option><option>3000m</option><option>5000m</option><option>10000m</option>
                </optgroup>
                <optgroup label="Hurdles">
                    <option>100m Hurdles</option><option>110m Hurdles</option><option>400m Hurdles</option>
                </optgroup>
                <optgroup label="Jumps">
                    <option>Long Jump</option><option>High Jump</option><option>Triple Jump</option><option>Pole Vault</option>
                </optgroup>
                <optgroup label="Throws">
                    <option>Shot Put</option><option>Javelin</option><option>Discus</option><option>Hammer Throw</option>
                </optgroup>
            </select>
            <input type="number" step="0.01" id="mVal" placeholder="Final Result">
            <button class="btn" style="background:var(--s)" onclick="saveData('main')">SAVE MAIN EVENT</button>
        </div>
    </div>

    <div id="v-tab" class="container">
        <h2>Coach's Review Corner</h2>
        <div class="card">
            <label>Coach Name:</label>
            <input type="text" id="revCoach" placeholder="Coach Name">
            <label>Review for Athlete:</label>
            <input type="text" id="revStudent" placeholder="Student Name">
            <textarea id="revText" placeholder="Write technical feedback..."></textarea>
            <button class="btn" style="background:#000" onclick="saveReview()">POST REVIEW</button>
        </div>
        <div id="reviewList"></div>
    </div>

    <script>
        const firebaseConfig = { apiKey: "AIza...", databaseURL: "https://athletetracker-5efd6-default-rtdb.firebaseio.com" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        function showTab(id, btn) {
            document.querySelectorAll('.container').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            btn.classList.add('active');
        }

        function saveData(type) {
            const athlete = document.getElementById(type === 'practice' ? 'pAthlete' : 'mAthlete').value;
            const event = document.getElementById(type === 'practice' ? 'pDrill' : 'mEvent').value;
            const val = document.getElementById(type === 'practice' ? 'pVal' : 'mVal').value;
            const date = new Date().toLocaleString();

            if(!athlete || !val) return alert("Bhai, naam aur result dono dalo!");

            db.ref(`academy/${type}`).push({ athlete, event, val, date });
            alert("Data saved with Date & Time!");
        }

        function saveReview() {
            const coach = document.getElementById('revCoach').value;
            const student = document.getElementById('revStudent').value;
            const text = document.getElementById('revText').value;
            const date = new Date().toLocaleDateString();

            if(coach && student && text) {
                db.ref(`academy/reviews`).push({ coach, student, text, date });
                alert("Review Published!");
            }
        }

        db.ref(`academy/reviews`).on('value', snap => {
            const list = document.getElementById('reviewList');
            list.innerHTML = "";
            snap.forEach(child => {
                const r = child.val();
                list.innerHTML += `
                    <div class="review-card">
                        <span class="date-tag">${r.date}</span>
                        <b>Coach ${r.coach}</b> to <b>${r.student}</b>
                        <p>${r.text}</p>
                    </div>`;
            });
        });
    </script>
</body>
</html>
