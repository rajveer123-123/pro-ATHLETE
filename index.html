<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Track & Field AI Pro - Flexible Reports</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        :root { --p: #2563eb; --s: #7c3aed; --bg: #f8fafc; --gold: #d4af37; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); margin: 0; padding-bottom: 50px; }
        .nav-bar { display: flex; overflow-x: auto; background: white; border-bottom: 2px solid #ddd; position: sticky; top: 0; z-index: 1000; padding: 5px; }
        .nav-btn { padding: 12px 18px; border: none; background: none; font-weight: 600; color: #64748b; cursor: pointer; white-space: nowrap; }
        .nav-btn.active { color: var(--p); border-bottom: 3px solid var(--p); }
        .container { padding: 15px; display: none; max-width: 500px; margin: auto; }
        .container.active { display: block; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .card { background: white; padding: 18px; border-radius: 16px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); margin-bottom: 15px; border: 1px solid #e2e8f0; }
        select, input, textarea { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #cbd5e1; border-radius: 12px; font-size: 16px; box-sizing: border-box; }
        .btn { width: 100%; padding: 14px; border: none; border-radius: 12px; color: white; font-weight: bold; cursor: pointer; }
        .report-filter { display: flex; gap: 5px; margin-bottom: 10px; }
        .filter-btn { flex: 1; padding: 8px; border-radius: 8px; border: 1px solid var(--p); background: white; font-size: 12px; cursor: pointer; }
        .filter-btn.active { background: var(--p); color: white; }
        #chatBox { height: 250px; overflow-y: auto; background: #f1f5f9; padding: 15px; border-radius: 12px; margin-bottom: 10px; border: 1px solid #ddd; display: flex; flex-direction: column; gap: 8px; }
        .msg-ai { background: white; padding: 10px; border-radius: 12px 12px 12px 0; border-left: 4px solid var(--s); font-size: 14px; align-self: flex-start; }
        .msg-user { background: var(--p); color: white; padding: 10px; border-radius: 12px 12px 0 12px; font-size: 14px; align-self: flex-end; }
    </style>
</head>
<body>

    <div class="nav-bar">
        <button class="nav-btn active" onclick="showTab('page-p', this)">Practice</button>
        <button class="nav-btn" onclick="showTab('page-m', this)">Main Event</button>
        <button class="nav-btn" onclick="showTab('page-d', this)">Coach AI</button>
        <button class="nav-btn" onclick="showTab('page-r', this)">AI Report üíé</button>
        <button class="nav-btn" onclick="showTab('page-v', this)">Reviews</button>
    </div>

    <div id="page-p" class="container active">
        <h2>üèÉ Practice Drills</h2>
        <div class="card">
            <select id="pName">
                <option value="30 Metre">30 Metre</option><option value="40 Metre">40 Metre</option>
                <option value="80 Metre">80 Metre</option><option value="120 Metre">120 Metre</option>
                <option value="150 Metre">150 Metre</option><option value="180 Metre">180 Metre</option>
                <option value="300 Metre">300 Metre</option><option value="800 Metre">800 Metre</option>
                <option value="Broad Jump">Broad Jump</option><option value="Standing Triple">Standing Triple</option>
                <option value="5 Bounded">5 Bounded</option><option value="10 Bounded">10 Bounded</option>
                <option value="Ball Throw">Ball Throw</option><option value="Back Throw">Back Throw</option>
            </select>
            <input type="number" step="0.01" id="pValue" placeholder="Result">
            <button class="btn" style="background:var(--p)" onclick="saveData('practice')">SAVE DATA</button>
        </div>
        <div class="card"><canvas id="pGraph"></canvas></div>
    </div>

    <div id="page-m" class="container">
        <h2>üèÜ Competition Results</h2>
        <div class="card">
            <select id="mName">
                <option value="100m">100m</option><option value="200m">200m</option>
                <option value="400m">400m</option><option value="800m">800m</option>
                <option value="Long Jump">Long Jump</option><option value="Javelin">Javelin</option>
            </select>
            <input type="number" step="0.01" id="mValue" placeholder="Score/Rank">
            <button class="btn" style="background:var(--s)" onclick="saveData('main')">SAVE RESULT</button>
        </div>
        <div class="card"><canvas id="mGraph"></canvas></div>
    </div>

    <div id="page-d" class="container">
        <h2>ü§ñ AI Dashboard</h2>
        <div class="card" style="border-left: 5px solid var(--p);">
            <div id="aiAnalysis">Loading training data...</div>
        </div>
    </div>

    <div id="page-r" class="container">
        <div id="sub-box" class="card" style="text-align:center;">
            <h2>üíé Premium Subscription</h2>
            <p>Unlock 24/7 AI Bot & Advanced Flexible Reports.</p>
            <select id="plan">
                <option value="1">1 Month Plan</option>
                <option value="5">5 Month Plan (Value)</option>
                <option value="12">1 Year Plan (Best)</option>
            </select>
            <input type="text" id="subCode" placeholder="Enter Activation Code (1234)">
            <button class="btn" style="background:var(--p)" onclick="unlockPremium()">ACTIVATE</button>
        </div>

        <div id="premium-content" style="display:none;">
            <h2>üìà Flexible AI Analytics</h2>
            <div class="report-filter">
                <button class="filter-btn" onclick="generateReport(7, this)">1 Week</button>
                <button class="filter-btn" onclick="generateReport(14, this)">2 Weeks</button>
                <button class="filter-btn active" onclick="generateReport(30, this)">1 Month</button>
            </div>
            <div class="card" id="reportOutput" style="background:#fffbeb;">
                AI is ready to analyze your selected period...
            </div>
            
            <h2>üí¨ 24/7 AI Personal Coach</h2>
            <div id="chatBox">
                <div class="msg-ai"><b>AI:</b> Main aapki reports dekh sakta hoon. Koi sawal hai?</div>
            </div>
            <div style="display:flex; gap:5px;">
                <input type="text" id="chatInput" placeholder="Ask AI anything...">
                <button class="btn" style="width:70px; background:var(--s)" onclick="askAI()">ASK</button>
            </div>
        </div>
    </div>

    <div id="page-v" class="container">
        <h2>üí¨ Reviews</h2>
        <div id="reviewWall"></div>
    </div>

    <script>
        const firebaseConfig = { apiKey: "AIza...", databaseURL: "https://..." }; // Put your config
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        let userID = localStorage.getItem('athleteTracker_ID') || 'athlete_user_v1';

        function showTab(id, btn) {
            document.querySelectorAll('.container').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            btn.classList.add('active');
            if(id === 'page-r' && localStorage.getItem('isPremium') === 'true') {
                document.getElementById('sub-box').style.display = 'none';
                document.getElementById('premium-content').style.display = 'block';
            }
        }

        function saveData(type) {
            const n = document.getElementById(type === 'practice' ? 'pName' : 'mName').value;
            const v = document.getElementById(type === 'practice' ? 'pValue' : 'mValue').value;
            if(n && v) {
                db.ref(`${userID}/${type}`).push({ n, v: parseFloat(v), d: new Date().getTime() });
                alert("Data Saved!");
            }
        }

        function generateReport(days, btn) {
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.getElementById('reportOutput').innerHTML = `ü§ñ **AI Analysis (${days} Days):** Pichle ${days} dino mein aapne Broad Jump mein kaafi sudhar kiya hai. Endurance thoda low hai.`;
        }

        function unlockPremium() {
            if(document.getElementById('subCode').value === "1234") {
                localStorage.setItem('isPremium', 'true');
                location.reload();
            } else { alert("Wrong Code!"); }
        }

        function askAI() {
            const input = document.getElementById('chatInput');
            if(!input.value) return;
            document.getElementById('chatBox').innerHTML += `<div class="msg-user">${input.value}</div>`;
            setTimeout(() => {
                document.getElementById('chatBox').innerHTML += `<div class="msg-ai"><b>AI:</b> Aapka pichla data check kar liya hai. Kal ki 800m run ke baad thoda rest lein.</div>`;
            }, 800);
            input.value = '';
        }
    </script>
</body>
</html>
